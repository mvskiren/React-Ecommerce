{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _AsyncUtils = require('./AsyncUtils');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _runTransitionHook = require('./runTransitionHook');\n\nvar _runTransitionHook2 = _interopRequireDefault(_runTransitionHook);\n\nvar _Actions = require('./Actions');\n\nvar _LocationUtils = require('./LocationUtils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar createHistory = function createHistory() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var getCurrentLocation = options.getCurrentLocation,\n      getUserConfirmation = options.getUserConfirmation,\n      pushLocation = options.pushLocation,\n      replaceLocation = options.replaceLocation,\n      go = options.go,\n      keyLength = options.keyLength;\n  var currentLocation = void 0;\n  var pendingLocation = void 0;\n  var beforeListeners = [];\n  var listeners = [];\n  var allKeys = [];\n\n  var getCurrentIndex = function getCurrentIndex() {\n    if (pendingLocation && pendingLocation.action === _Actions.POP) return allKeys.indexOf(pendingLocation.key);\n    if (currentLocation) return allKeys.indexOf(currentLocation.key);\n    return -1;\n  };\n\n  var updateLocation = function updateLocation(nextLocation) {\n    var currentIndex = getCurrentIndex();\n    currentLocation = nextLocation;\n\n    if (currentLocation.action === _Actions.PUSH) {\n      allKeys = [].concat(allKeys.slice(0, currentIndex + 1), [currentLocation.key]);\n    } else if (currentLocation.action === _Actions.REPLACE) {\n      allKeys[currentIndex] = currentLocation.key;\n    }\n\n    listeners.forEach(function (listener) {\n      return listener(currentLocation);\n    });\n  };\n\n  var listenBefore = function listenBefore(listener) {\n    beforeListeners.push(listener);\n    return function () {\n      return beforeListeners = beforeListeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  };\n\n  var listen = function listen(listener) {\n    listeners.push(listener);\n    return function () {\n      return listeners = listeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  };\n\n  var confirmTransitionTo = function confirmTransitionTo(location, callback) {\n    (0, _AsyncUtils.loopAsync)(beforeListeners.length, function (index, next, done) {\n      (0, _runTransitionHook2.default)(beforeListeners[index], location, function (result) {\n        return result != null ? done(result) : next();\n      });\n    }, function (message) {\n      if (getUserConfirmation && typeof message === 'string') {\n        getUserConfirmation(message, function (ok) {\n          return callback(ok !== false);\n        });\n      } else {\n        callback(message !== false);\n      }\n    });\n  };\n\n  var transitionTo = function transitionTo(nextLocation) {\n    if (currentLocation && (0, _LocationUtils.locationsAreEqual)(currentLocation, nextLocation) || pendingLocation && (0, _LocationUtils.locationsAreEqual)(pendingLocation, nextLocation)) return; // Nothing to do\n\n    pendingLocation = nextLocation;\n    confirmTransitionTo(nextLocation, function (ok) {\n      if (pendingLocation !== nextLocation) return; // Transition was interrupted during confirmation\n\n      pendingLocation = null;\n\n      if (ok) {\n        // Treat PUSH to same path like REPLACE to be consistent with browsers\n        if (nextLocation.action === _Actions.PUSH) {\n          var prevPath = (0, _PathUtils.createPath)(currentLocation);\n          var nextPath = (0, _PathUtils.createPath)(nextLocation);\n          if (nextPath === prevPath && (0, _LocationUtils.statesAreEqual)(currentLocation.state, nextLocation.state)) nextLocation.action = _Actions.REPLACE;\n        }\n\n        if (nextLocation.action === _Actions.POP) {\n          updateLocation(nextLocation);\n        } else if (nextLocation.action === _Actions.PUSH) {\n          if (pushLocation(nextLocation) !== false) updateLocation(nextLocation);\n        } else if (nextLocation.action === _Actions.REPLACE) {\n          if (replaceLocation(nextLocation) !== false) updateLocation(nextLocation);\n        }\n      } else if (currentLocation && nextLocation.action === _Actions.POP) {\n        var prevIndex = allKeys.indexOf(currentLocation.key);\n        var nextIndex = allKeys.indexOf(nextLocation.key);\n        if (prevIndex !== -1 && nextIndex !== -1) go(prevIndex - nextIndex); // Restore the URL\n      }\n    });\n  };\n\n  var push = function push(input) {\n    return transitionTo(createLocation(input, _Actions.PUSH));\n  };\n\n  var replace = function replace(input) {\n    return transitionTo(createLocation(input, _Actions.REPLACE));\n  };\n\n  var goBack = function goBack() {\n    return go(-1);\n  };\n\n  var goForward = function goForward() {\n    return go(1);\n  };\n\n  var createKey = function createKey() {\n    return Math.random().toString(36).substr(2, keyLength || 6);\n  };\n\n  var createHref = function createHref(location) {\n    return (0, _PathUtils.createPath)(location);\n  };\n\n  var createLocation = function createLocation(location, action) {\n    var key = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : createKey();\n    return (0, _LocationUtils.createLocation)(location, action, key);\n  };\n\n  return {\n    getCurrentLocation: getCurrentLocation,\n    listenBefore: listenBefore,\n    listen: listen,\n    transitionTo: transitionTo,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    createKey: createKey,\n    createPath: _PathUtils.createPath,\n    createHref: createHref,\n    createLocation: createLocation\n  };\n};\n\nexports.default = createHistory;","map":{"version":3,"sources":["/Users/saikiran/Desktop/Mojo-Ecommerce/react-ecommerce/node_modules/react-router/node_modules/history/lib/createHistory.js"],"names":["exports","__esModule","_AsyncUtils","require","_PathUtils","_runTransitionHook","_runTransitionHook2","_interopRequireDefault","_Actions","_LocationUtils","obj","default","createHistory","options","arguments","length","undefined","getCurrentLocation","getUserConfirmation","pushLocation","replaceLocation","go","keyLength","currentLocation","pendingLocation","beforeListeners","listeners","allKeys","getCurrentIndex","action","POP","indexOf","key","updateLocation","nextLocation","currentIndex","PUSH","concat","slice","REPLACE","forEach","listener","listenBefore","push","filter","item","listen","confirmTransitionTo","location","callback","loopAsync","index","next","done","result","message","ok","transitionTo","locationsAreEqual","prevPath","createPath","nextPath","statesAreEqual","state","prevIndex","nextIndex","input","createLocation","replace","goBack","goForward","createKey","Math","random","toString","substr","createHref"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _AsyncUtils = require('./AsyncUtils');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _runTransitionHook = require('./runTransitionHook');\n\nvar _runTransitionHook2 = _interopRequireDefault(_runTransitionHook);\n\nvar _Actions = require('./Actions');\n\nvar _LocationUtils = require('./LocationUtils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar createHistory = function createHistory() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var getCurrentLocation = options.getCurrentLocation,\n      getUserConfirmation = options.getUserConfirmation,\n      pushLocation = options.pushLocation,\n      replaceLocation = options.replaceLocation,\n      go = options.go,\n      keyLength = options.keyLength;\n\n\n  var currentLocation = void 0;\n  var pendingLocation = void 0;\n  var beforeListeners = [];\n  var listeners = [];\n  var allKeys = [];\n\n  var getCurrentIndex = function getCurrentIndex() {\n    if (pendingLocation && pendingLocation.action === _Actions.POP) return allKeys.indexOf(pendingLocation.key);\n\n    if (currentLocation) return allKeys.indexOf(currentLocation.key);\n\n    return -1;\n  };\n\n  var updateLocation = function updateLocation(nextLocation) {\n    var currentIndex = getCurrentIndex();\n\n    currentLocation = nextLocation;\n\n    if (currentLocation.action === _Actions.PUSH) {\n      allKeys = [].concat(allKeys.slice(0, currentIndex + 1), [currentLocation.key]);\n    } else if (currentLocation.action === _Actions.REPLACE) {\n      allKeys[currentIndex] = currentLocation.key;\n    }\n\n    listeners.forEach(function (listener) {\n      return listener(currentLocation);\n    });\n  };\n\n  var listenBefore = function listenBefore(listener) {\n    beforeListeners.push(listener);\n\n    return function () {\n      return beforeListeners = beforeListeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  };\n\n  var listen = function listen(listener) {\n    listeners.push(listener);\n\n    return function () {\n      return listeners = listeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  };\n\n  var confirmTransitionTo = function confirmTransitionTo(location, callback) {\n    (0, _AsyncUtils.loopAsync)(beforeListeners.length, function (index, next, done) {\n      (0, _runTransitionHook2.default)(beforeListeners[index], location, function (result) {\n        return result != null ? done(result) : next();\n      });\n    }, function (message) {\n      if (getUserConfirmation && typeof message === 'string') {\n        getUserConfirmation(message, function (ok) {\n          return callback(ok !== false);\n        });\n      } else {\n        callback(message !== false);\n      }\n    });\n  };\n\n  var transitionTo = function transitionTo(nextLocation) {\n    if (currentLocation && (0, _LocationUtils.locationsAreEqual)(currentLocation, nextLocation) || pendingLocation && (0, _LocationUtils.locationsAreEqual)(pendingLocation, nextLocation)) return; // Nothing to do\n\n    pendingLocation = nextLocation;\n\n    confirmTransitionTo(nextLocation, function (ok) {\n      if (pendingLocation !== nextLocation) return; // Transition was interrupted during confirmation\n\n      pendingLocation = null;\n\n      if (ok) {\n        // Treat PUSH to same path like REPLACE to be consistent with browsers\n        if (nextLocation.action === _Actions.PUSH) {\n          var prevPath = (0, _PathUtils.createPath)(currentLocation);\n          var nextPath = (0, _PathUtils.createPath)(nextLocation);\n\n          if (nextPath === prevPath && (0, _LocationUtils.statesAreEqual)(currentLocation.state, nextLocation.state)) nextLocation.action = _Actions.REPLACE;\n        }\n\n        if (nextLocation.action === _Actions.POP) {\n          updateLocation(nextLocation);\n        } else if (nextLocation.action === _Actions.PUSH) {\n          if (pushLocation(nextLocation) !== false) updateLocation(nextLocation);\n        } else if (nextLocation.action === _Actions.REPLACE) {\n          if (replaceLocation(nextLocation) !== false) updateLocation(nextLocation);\n        }\n      } else if (currentLocation && nextLocation.action === _Actions.POP) {\n        var prevIndex = allKeys.indexOf(currentLocation.key);\n        var nextIndex = allKeys.indexOf(nextLocation.key);\n\n        if (prevIndex !== -1 && nextIndex !== -1) go(prevIndex - nextIndex); // Restore the URL\n      }\n    });\n  };\n\n  var push = function push(input) {\n    return transitionTo(createLocation(input, _Actions.PUSH));\n  };\n\n  var replace = function replace(input) {\n    return transitionTo(createLocation(input, _Actions.REPLACE));\n  };\n\n  var goBack = function goBack() {\n    return go(-1);\n  };\n\n  var goForward = function goForward() {\n    return go(1);\n  };\n\n  var createKey = function createKey() {\n    return Math.random().toString(36).substr(2, keyLength || 6);\n  };\n\n  var createHref = function createHref(location) {\n    return (0, _PathUtils.createPath)(location);\n  };\n\n  var createLocation = function createLocation(location, action) {\n    var key = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : createKey();\n    return (0, _LocationUtils.createLocation)(location, action, key);\n  };\n\n  return {\n    getCurrentLocation: getCurrentLocation,\n    listenBefore: listenBefore,\n    listen: listen,\n    transitionTo: transitionTo,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    createKey: createKey,\n    createPath: _PathUtils.createPath,\n    createHref: createHref,\n    createLocation: createLocation\n  };\n};\n\nexports.default = createHistory;"]},"metadata":{},"sourceType":"script"}